{
  "nodes": {
    "start": {
      "id": "start",
      "speaker": "Pixel",
      "text": "ðŸŽ® FINAL LEVEL - Time to build a COMPLETE GAME from scratch! This is it!",
      "followUp": "We're making 'Space Defender' - a full game with player, enemies, scoring, levels, and game over, all in TypeScript with Strata!",
      "options": [
        {
          "text": "Let's build this game!",
          "next": "gameDesign"
        },
        {
          "text": "What will we create?",
          "next": "gameOverview"
        }
      ]
    },
    "gameOverview": {
      "id": "gameOverview",
      "speaker": "Pixel",
      "text": "Space Defender: You're a spaceship defending Earth from alien invaders!",
      "followUp": "Features: Movement, shooting, enemies, collision, scoring, levels, and a game over screen!",
      "options": [
        {
          "text": "Sounds epic! Let's start!",
          "next": "gameDesign"
        }
      ]
    },
    "gameDesign": {
      "id": "gameDesign",
      "speaker": "Pixel",
      "text": "First rule of game dev: Plan before you code! Let's design our game structure!",
      "codeExample": "// SPACE DEFENDER - Game Design\n/*\nGAME ELEMENTS:\n1. Player spaceship (moves left/right, shoots)\n2. Enemy aliens (move down, increase speed each level)\n3. Bullets (player shoots up)\n4. Score system (points for each enemy)\n5. Game states (MENU, PLAYING, GAME_OVER)\n\nCONTROLS:\n- Arrow Keys: Move\n- Space: Shoot\n- R: Restart (when game over)\n*/",
      "followUp": "Good planning = smoother development. Now let's code the foundation!",
      "options": [
        {
          "text": "Start with the game window",
          "next": "gameSetup"
        }
      ]
    },
    "gameSetup": {
      "id": "gameSetup",
      "speaker": "Pixel",
      "text": "Let's create the game window and define our constants!",
      "codeExample": "import { strata } from 'strata';\n\n// Constants\nconst SCREEN_WIDTH = 800;\nconst SCREEN_HEIGHT = 600;\nconst BLACK = [0, 0, 0];\nconst WHITE = [255, 255, 255];\nconst GREEN = [0, 255, 0];\nconst RED = [255, 0, 0];\n\n// Initialize\nstrata.init();\nconst screen = strata.display.setMode([SCREEN_WIDTH, SCREEN_HEIGHT]);\nstrata.display.setCaption('Space Defender');\nconst clock = new strata.time.Clock();",
      "followUp": "Foundation ready! Now let's create the Player class!",
      "options": [
        {
          "text": "Create the player spaceship",
          "next": "playerClass"
        }
      ]
    },
    "playerClass": {
      "id": "playerClass",
      "speaker": "Pixel",
      "text": "The player is the heart of our game - let's make it awesome!",
      "codeExample": "class Player {\n    constructor(x, y) {\n        this.rect = new strata.Rect(x, y, 50, 40);\n        this.speed = 5;\n        this.shootCooldown = 0;\n    }\n        \n    update(keys) {\n        // Movement\n        if (keys[strata.K_LEFT] && this.rect.left > 0) {\n            this.rect.x -= this.speed;\n        }\n        if (keys[strata.K_RIGHT] && this.rect.right < SCREEN_WIDTH) {\n            this.rect.x += this.speed;\n        }\n        \n        // Cooldown\n        if (this.shootCooldown > 0) this.shootCooldown--;\n    }\n    \n    draw(screen) {\n        strata.draw.rect(screen, GREEN, this.rect);\n    }\n}",
      "followUp": "Player ready! Now we need bullets to shoot!",
      "options": [
        {
          "text": "Add the bullet system",
          "next": "bulletClass"
        }
      ]
    },
    "bulletClass": {
      "id": "bulletClass",
      "speaker": "Pixel",
      "text": "Bullets are simple but crucial - they defeat enemies!",
      "codeExample": "class Bullet {\n    constructor(x, y) {\n        this.rect = new strata.Rect(x - 2, y, 4, 10);\n        this.speed = 10;\n        this.isActive = true;\n    }\n    \n    update() {\n        this.rect.y -= this.speed;\n        if (this.rect.bottom < 0) {\n            this.isActive = false;\n        }\n    }\n    \n    draw(screen) {\n        strata.draw.rect(screen, [255, 255, 0], this.rect);\n    }\n}",
      "followUp": "Bullets ready! Time for the enemies!",
      "options": [
        {
          "text": "Create enemy aliens",
          "next": "enemyClass"
        }
      ]
    },
    "enemyClass": {
      "id": "enemyClass",
      "speaker": "Pixel",
      "text": "Enemies make the game challenging - let's create some aliens!",
      "codeExample": "class Enemy {\n    constructor(x, y) {\n        this.rect = new strata.Rect(x, y, 40, 30);\n        this.speed = 2;\n        this.direction = 1;\n    }\n        \n    update() {\n        this.rect.x += this.speed * this.direction;\n    }\n        \n    dropDown() {\n        this.rect.y += 40;\n        this.direction *= -1;\n    }\n    \n    draw(screen) {\n        strata.draw.rect(screen, RED, this.rect);\n    }\n}",
      "followUp": "Enemies ready! Now let's build the main game manager!",
      "options": [
        {
          "text": "Create the game manager",
          "next": "gameManager"
        }
      ]
    },
    "gameManager": {
      "id": "gameManager",
      "speaker": "Pixel",
      "text": "The Game Manager ties everything together - it's the brain of our game!",
      "codeExample": "class Game {\n    constructor() {\n        this.reset();\n        this.state = 'MENU';\n        this.score = 0;\n    }\n        \n    reset() {\n        this.player = new Player(SCREEN_WIDTH / 2 - 25, SCREEN_HEIGHT - 60);\n        this.bullets = [];\n        this.enemies = [];\n        this.score = 0;\n        this.spawnEnemies();\n    }\n        \n    spawnEnemies() {\n        for (let row = 0; row < 3; row++) {\n            for (let col = 0; col < 8; col++) {\n                this.enemies.push(new Enemy(75 + col * 80, 50 + row * 50));\n            }\n        }\n    }\n    \n    handleCollisions() {\n        for (let bullet of this.bullets) {\n            for (let enemy of this.enemies) {\n                if (bullet.rect.colliderect(enemy.rect)) {\n                    bullet.isActive = false;\n                    enemy.isDead = true; // Mark for removal\n                    this.score += 10;\n                }\n            }\n        }\n        this.enemies = this.enemies.filter(e => !e.isDead);\n        this.bullets = this.bullets.filter(b => b.isActive);\n    }\n}",
      "followUp": "Game logic ready! Now let's see the complete game loop!",
      "options": [
        {
          "text": "Build the complete game loop",
          "next": "completeGame"
        }
      ]
    },
    "completeGame": {
      "id": "completeGame",
      "speaker": "Pixel",
      "text": "Here it is - the COMPLETE SPACE DEFENDER game! You did it!",
      "codeExample": "const game = new Game();\nlet running = true;\n\nwhile (running) {\n    const events = strata.event.get();\n    for (let event of events) {\n        if (event.type === strata.QUIT) running = false;\n        if (event.type === strata.KEYDOWN && game.state === 'MENU') {\n            if (event.key === strata.K_SPACE) game.state = 'PLAYING';\n        }\n    }\n    \n    if (game.state === 'PLAYING') {\n        const keys = strata.key.getPressed();\n        game.player.update(keys);\n        \n        if (keys[strata.K_SPACE] && game.player.shootCooldown === 0) {\n            game.bullets.push(new Bullet(game.player.rect.centerx, game.player.rect.top));\n            game.player.shootCooldown = 20;\n        }\n\n        // Update bullets\n        game.bullets.forEach(b => b.update());\n        \n        // Update enemies with edge detection\n        let moveDown = false;\n        for (let enemy of game.enemies) {\n            enemy.update();\n            if (enemy.rect.right > SCREEN_WIDTH || enemy.rect.left < 0) {\n                moveDown = true;\n            }\n        }\n        \n        if (moveDown) {\n            game.enemies.forEach(e => e.dropDown());\n        }\n\n        game.handleCollisions();\n        \n        if (game.enemies.length === 0) game.spawnEnemies();\n    }\n    \n    screen.fill(BLACK);\n    if (game.state === 'PLAYING') {\n        game.player.draw(screen);\n        game.bullets.forEach(b => b.draw(screen));\n        game.enemies.forEach(e => e.draw(screen));\n    }\n    \n    strata.display.flip();\n    clock.tick(60);\n}",
      "followUp": "YOU DID IT! You've created a complete, playable game with all the features!",
      "options": [
        {
          "text": "This is amazing!",
          "next": "lessonComplete"
        }
      ]
    },
    "lessonComplete": {
      "id": "lessonComplete",
      "speaker": "Pixel",
      "text": "ðŸŽŠðŸŽ® CONGRATULATIONS! YOU'VE COMPLETED ALL 10 LESSONS! ðŸŽ®ðŸŽŠ",
      "followUp": "You went from 'Hello World' to building a COMPLETE GAME! You're officially a Strata Game Developer!",
      "additionalText": "You've learned: Variables, Math, Conditionals, Loops, Arrays, Functions, Objects, Classes, and Game Development! That's EVERYTHING you need!",
      "action": "completeLesson",
      "actionParams": { "lesson": 10, "completed": true },
      "options": [
        {
          "text": "Start building my dream game!",
          "action": "startGameMode"
        },
        {
          "text": "Review any lesson",
          "action": "openLessons"
        }
      ]
    }
  },
  "startNode": "start"
}
