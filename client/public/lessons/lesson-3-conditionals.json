{
  "nodes": {
    "start": {
      "id": "start",
      "speaker": "Pixel",
      "text": "Level 3 - Time to give your code a BRAIN! ðŸ§  We're learning how to make decisions!",
      "followUp": "You know how games react to what you do? That's what we're building today in Strata!",
      "options": [
        {
          "text": "Yes! Let's make smart code!",
          "next": "ifStatement"
        },
        {
          "text": "Wait, like the choices in games?",
          "next": "gameAnalogy"
        }
      ]
    },
    "gameAnalogy": {
      "id": "gameAnalogy",
      "speaker": "Pixel",
      "text": "Exactly! Like when your health hits zero and it's game over, or when you find a key and suddenly doors open!",
      "followUp": "Every single game moment is an IF-THEN decision. Ready to code your own in TypeScript?",
      "options": [
        {
          "text": "This is gonna be cool!",
          "next": "ifStatement"
        }
      ]
    },
    "ifStatement": {
      "id": "ifStatement",
      "speaker": "Pixel",
      "text": "So here's the magic word: 'if'! It's like asking TypeScript a question and doing something based on the answer!",
      "codeExample": "let playerHealth = 25;\n\nif (playerHealth < 30) {\n    console.log('Warning: Low health!');\n    console.log('Find a health potion!');\n}",
      "followUp": "See those curly braces { }? They wrap around the code that runs when the 'if' is true!",
      "options": [
        {
          "text": "But what happens when health is fine?",
          "next": "elseStatement"
        },
        {
          "text": "Why use curly braces?",
          "next": "explainBraces"
        }
      ]
    },
    "explainBraces": {
      "id": "explainBraces",
      "speaker": "Pixel",
      "text": "Great question! In TypeScript, curly braces define a 'block' of code. Everything inside the braces belongs to the 'if'!",
      "codeExample": "if (playerHasKey) {\n    console.log('Opening door...'); // Inside the block\n    console.log('You enter the room!'); // Also inside!\n}\nconsole.log('Game continues...'); // Outside - always runs!",
      "followUp": "It's like a box that only opens when the condition inside the parentheses ( ) is true!",
      "options": [
        {
          "text": "Got it! So what about when it's false?",
          "next": "elseStatement"
        }
      ]
    },
    "elseStatement": {
      "id": "elseStatement",
      "speaker": "Pixel",
      "text": "That's where 'else' comes in! It's the backup plan when your 'if' condition isn't true!",
      "codeExample": "let coins = 45;\nlet itemCost = 50;\n\nif (coins >= itemCost) {\n    console.log('Purchase successful!');\n    coins = coins - itemCost;\n} else {\n    console.log('Not enough coins!');\n    console.log('You need ' + (itemCost - coins) + ' more coins');\n}",
      "followUp": "See? If you CAN afford it, buy it! Otherwise, tell them they're broke! Simple!",
      "options": [
        {
          "text": "What if I need like... five different options?",
          "next": "elseIfStatement"
        },
        {
          "text": "Ooh, I wanna try this!",
          "next": "tryCondition"
        }
      ]
    },
    "elseIfStatement": {
      "id": "elseIfStatement",
      "speaker": "Pixel",
      "text": "Boom! That's where 'else if' saves the day! It's perfect for multiple paths!",
      "codeExample": "let score = 850;\n\nif (score >= 1000) {\n    console.log('PERFECT! S-Rank!');\n} else if (score >= 800) {\n    console.log('Great job! A-Rank!');\n} else if (score >= 600) {\n    console.log('Good! B-Rank!');\n} else if (score >= 400) {\n    console.log('Not bad! C-Rank!');\n} else {\n    console.log('Try again! D-Rank');\n}",
      "followUp": "It checks from top to bottom and stops at the FIRST match - like falling through platforms until you hit one!",
      "options": [
        {
          "text": "Wait, what if two could be true?",
          "next": "multipleTrue"
        },
        {
          "text": "I need to see more of this!",
          "next": "moreExamples"
        }
      ]
    },
    "multipleTrue": {
      "id": "multipleTrue",
      "speaker": "Pixel",
      "text": "Great question! Only the FIRST match wins! Once TypeScript finds a true condition, it's done checking that whole if/else chain!",
      "codeExample": "let age = 15;\n\nif (age >= 10) {  // true! Stop here!\n    console.log('You can play rated E10+ games');\n} else if (age >= 13) {  // Also true, but we never check!\n    console.log('You can play Teen games');\n} else if (age >= 17) {\n    console.log('You can play Mature games');\n}",
      "followUp": "Want to check ALL conditions independently? Then you need separate 'if' statements instead!",
      "options": [
        {
          "text": "Yeah, show me how that works!",
          "next": "separateIfs"
        }
      ]
    },
    "separateIfs": {
      "id": "separateIfs",
      "speaker": "Pixel",
      "text": "Check this out - separate 'if's are like multiple checkpoints - you can trigger them ALL!",
      "codeExample": "// Multiple power-ups can be active!\nlet hasSpeedBoost = true;\nlet hasShield = true;\nlet hasDoublePoints = false;\n\nif (hasSpeedBoost) {\n    console.log('Speed x2!'); // Yes!\n}\n    \nif (hasShield) {\n    console.log('Protected!'); // Also yes!\n}\n    \nif (hasDoublePoints) {\n    console.log('Double points!'); // Nope\n}",
      "followUp": "Perfect for when you can have multiple power-ups at once, right?",
      "options": [
        {
          "text": "Can I check two things in one if?",
          "next": "logicalOperators"
        }
      ]
    },
    "tryCondition": {
      "id": "tryCondition",
      "speaker": "Pixel",
      "text": "Time to code a battle! Here's the setup...",
      "followUp": "Your enemy has 50 HP, you hit for 30 damage. What should we check?",
      "options": [
        {
          "text": "Can I one-shot them?",
          "next": "trySuccess"
        },
        {
          "text": "Is it a boss fight?",
          "next": "tryLogic"
        }
      ]
    },
    "trySuccess": {
      "id": "trySuccess",
      "speaker": "Pixel",
      "text": "Smart! Always check for the instant win first!",
      "codeExample": "let enemyHp = 50;\nlet attackPower = 30;\n\nif (enemyHp <= attackPower) {\n    console.log('One-shot victory!');\n} else {\n    let hitsNeeded = Math.ceil(enemyHp / attackPower);\n    console.log('Need ' + hitsNeeded + ' hits to win!');\n}",
      "followUp": "See? Your code just calculated combat outcomes! Ready for something even cooler?",
      "options": [
        {
          "text": "Hit me with the cool stuff!",
          "next": "logicalOperators"
        }
      ]
    },
    "tryLogic": {
      "id": "tryLogic",
      "speaker": "Pixel",
      "text": "Hmm, but the enemy only has 50 HP - that condition would never happen!",
      "codeExample": "let enemyHp = 50;\n\n// Enemy has 50, so > 100 is always false!\nif (enemyHp > 100) {\n    console.log('Boss battle!'); // This never runs!\n}\n    \n// Try this instead:\nif (enemyHp > 75) {\n    console.log('Strong enemy!');\n} else if (enemyHp > 40) {\n    console.log('Regular enemy!'); // This would run!\n} else {\n    console.log('Weak enemy!');\n}",
      "followUp": "Gotta match your conditions to your actual values! Ready for the next level?",
      "options": [
        {
          "text": "Yeah, I see what went wrong!",
          "next": "logicalOperators"
        }
      ]
    },
    "moreExamples": {
      "id": "moreExamples",
      "speaker": "Pixel",
      "text": "Check out this game menu - it's all conditionals!",
      "codeExample": "let menuChoice = 2;\n\nif (menuChoice === 1) {\n    console.log('Starting new game...');\n    console.log('Welcome to the adventure!');\n} else if (menuChoice === 2) {\n    console.log('Loading saved game...');\n    console.log('Welcome back, hero!');\n} else if (menuChoice === 3) {\n    console.log('Opening settings...');\n} else {\n    console.log('Invalid choice! Try again.');\n}",
      "followUp": "Every menu in every game works like this! But what if we need to check TWO things?",
      "options": [
        {
          "text": "Yeah! Like having a key AND being level 10?",
          "next": "logicalOperators"
        }
      ]
    },
    "logicalOperators": {
      "id": "logicalOperators",
      "speaker": "Pixel",
      "text": "YES! That's exactly it! We use && (AND), || (OR), and ! (NOT) - they're like logic glue!",
      "codeExample": "// AND (&&) - both gotta be true\nlet hasKey = true;\nlet isDoorUnlocked = false;\n\nif (hasKey && !isDoorUnlocked) {\n    console.log('Use key to unlock door!');\n}\n\n// OR (||) - just need one\nlet health = 15;\nlet hasPotion = true;\n\nif (health < 20 || hasPotion) {\n    console.log('Healing available!');\n}",
      "followUp": "&& = both, || = either one, ! = opposite. It's that simple!",
      "options": [
        {
          "text": "Show me something really complex!",
          "next": "complexConditions"
        },
        {
          "text": "Can I put ifs inside other ifs?",
          "next": "nestedIfs"
        }
      ]
    },
    "complexConditions": {
      "id": "complexConditions",
      "speaker": "Pixel",
      "text": "Alright, let's go all out - here's a real combat AI!",
      "codeExample": "let playerHp = 45;\nlet enemyHp = 80;\nlet mana = 20;\nlet hasSword = true;\nlet hasMagic = true;\n\nif (enemyHp > 50 && playerHp < 30) {\n    if (mana >= 30 && hasMagic) {\n        console.log('Cast healing spell!');\n    } else if (hasSword) {\n        console.log('Defensive stance!');\n    } else {\n        console.log('Retreat!');\n    }\n} else if (enemyHp <= 50 && playerHp > 30) {\n    console.log('All-out attack!');\n} else {\n    console.log('Balanced approach!');\n}",
      "followUp": "That's actual game AI logic right there! See the ifs inside ifs?",
      "options": [
        {
          "text": "Whoa, ifs inside ifs! Tell me more!",
          "next": "nestedIfs"
        }
      ]
    },
    "nestedIfs": {
      "id": "nestedIfs",
      "speaker": "Pixel",
      "text": "Exactly! You can put ifs inside ifs - like opening a door to find another door!",
      "codeExample": "let inventorySlots = 10;\nlet itemsCount = 8;\nlet isPremium = true;\n\nif (itemsCount < inventorySlots) {\n    console.log('Space available!');\n    if (isPremium) {\n        console.log('Premium bonus: +2 extra slots!');\n        inventorySlots += 2;\n    }\n} else {\n    console.log('Inventory full!');\n    if (isPremium) {\n        console.log('Premium feature: Auto-organize!');\n    }\n}",
      "followUp": "The inside if only happens if the outside if is true first. Like unlocking levels in a game!",
      "options": [
        {
          "text": "I'm ready for the final challenge!",
          "next": "finalChallenge"
        }
      ]
    },
    "finalChallenge": {
      "id": "finalChallenge",
      "speaker": "Pixel",
      "text": "BOSS CHALLENGE TIME! Let's build a treasure chest system!",
      "followUp": "Here's the deal: You need a key OR lockpicks to open it. High level players always get rare loot!",
      "codeExample": "let hasKey = false;\nlet hasLockpicks = true;\nlet playerLevel = 12;\nlet luck = Math.random() * 100;\n\n// Your code here!\nif (hasKey || hasLockpicks) {\n    console.log('Opening chest...');\n    if (playerLevel > 10) {\n        console.log('Rare item found!');\n    } else if (luck > 50) {\n        console.log('Common item found!');\n    } else {\n        console.log('Chest was empty!');\n    }\n} else {\n    console.log('Cannot open chest!');\n}",
      "options": [
        {
          "text": "I understand conditionals now!",
          "next": "lessonComplete"
        }
      ]
    },
    "lessonComplete": {
      "id": "lessonComplete",
      "speaker": "Pixel",
      "text": "ðŸŽŠ LEVEL 3 COMPLETE! Your code can now think and make decisions! ðŸ¤–",
      "followUp": "You've mastered the foundation of game logic! Every game mechanic uses these concepts!",
      "action": "completeLesson",
      "actionParams": { "lesson": 3, "nextLesson": 4 },
      "options": [
        {
          "text": "Continue to Lesson 4 - Loops & Repetition!",
          "action": "loadLesson",
          "actionParams": { "lesson": 4 }
        },
        {
          "text": "I'm ready to make a game!",
          "action": "startGameMode"
        },
        {
          "text": "Back to lesson menu",
          "action": "openLessons"
        }
      ]
    }
  },
  "startNode": "start"
}
