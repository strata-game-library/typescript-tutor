{
  "nodes": {
    "start": {
      "id": "start",
      "speaker": "Pixel",
      "text": "Level 5 - ARRAYS! Time to organize your data like a pro! ðŸ“‹",
      "followUp": "In TypeScript, we call lists 'arrays'. Think of them as your game's inventory system - holding multiple items in one place!",
      "options": [
        {
          "text": "Show me how arrays work!",
          "next": "createArray"
        },
        {
          "text": "Like an inventory in RPGs?",
          "next": "inventoryAnalogy"
        }
      ]
    },
    "inventoryAnalogy": {
      "id": "inventoryAnalogy",
      "speaker": "Pixel",
      "text": "EXACTLY! Arrays are perfect for inventories, high scores, enemy waves, projectile groups... everything!",
      "followUp": "Any time you need to track multiple things of the same type, arrays are your answer!",
      "options": [
        {
          "text": "Teach me array magic!",
          "next": "createArray"
        }
      ]
    },
    "createArray": {
      "id": "createArray",
      "speaker": "Pixel",
      "text": "Creating an array is easy - just use square brackets and separate items with commas!",
      "codeExample": "// Empty array\nlet inventory = [];\n\n// Array with items\nlet weapons = ['sword', 'bow', 'staff'];\n\n// Numbers array\nlet highScores = [1000, 850, 720, 650, 500];",
      "followUp": "Arrays can hold anything - strings, numbers, booleans, even other arrays!",
      "options": [
        {
          "text": "How do I access items?",
          "next": "indexing"
        },
        {
          "text": "Can I change them?",
          "next": "modifyArray"
        }
      ]
    },
    "indexing": {
      "id": "indexing",
      "speaker": "Pixel",
      "text": "Arrays use index numbers starting at 0 - like slots in a game's quick-bar!",
      "codeExample": "let inventory = ['potion', 'sword', 'shield', 'map'];\n\n// Access items by index\nlet firstItem = inventory[0];   // 'potion'\nlet secondItem = inventory[1];  // 'sword'\n\n// Check how many items\nlet count = inventory.length;  // 4",
      "followUp": "Remember: The first item is [0], not [1]! It's one of the most important rules in programming!",
      "options": [
        {
          "text": "What if I use a wrong index?",
          "next": "undefinedIndex"
        },
        {
          "text": "How do I add items?",
          "next": "addItems"
        }
      ]
    },
    "undefinedIndex": {
      "id": "undefinedIndex",
      "speaker": "Pixel",
      "text": "If you try to access an index that doesn't exist, TypeScript gives you 'undefined' - like trying to open a treasure chest that isn't there!",
      "codeExample": "let items = ['sword', 'shield'];\n\nconsole.log(items[0]); // 'sword'\nconsole.log(items[5]); // undefined\n\n// Safe way to check:\nif (items.length > 5) {\n    console.log(items[5]);\n} else {\n    console.log('No item in slot 5!');\n}",
      "followUp": "Always check your array length to stay safe!",
      "options": [
        {
          "text": "Show me how to add items!",
          "next": "addItems"
        }
      ]
    },
    "modifyArray": {
      "id": "modifyArray",
      "speaker": "Pixel",
      "text": "Arrays can be changed anytime! Perfect for upgrading gear or swapping items!",
      "codeExample": "let inventory = ['sword', 'shield', 'potion'];\n\n// Change an item\ninventory[0] = 'magic sword';  // Upgrade!\n\nconsole.log(inventory); // ['magic sword', 'shield', 'potion']",
      "followUp": "Just use the index and the equals sign to swap what's in that slot!",
      "options": [
        {
          "text": "How do I add new items?",
          "next": "addItems"
        }
      ]
    },
    "addItems": {
      "id": "addItems",
      "speaker": "Pixel",
      "text": "There are several ways to add items - like picking up loot in a dungeon!",
      "codeExample": "let inventory = ['sword'];\n\n// Add one item at the end\ninventory.push('potion');\n\n// Add an item at the beginning\ninventory.unshift('shield');\n\n// Add at a specific position (index 1)\ninventory.splice(1, 0, 'map');\n\nconsole.log(inventory);\n// ['shield', 'map', 'sword', 'potion']",
      "followUp": "push() is your most common tool for adding new loot to the end of a list!",
      "options": [
        {
          "text": "How do I remove items?",
          "next": "removeItems"
        },
        {
          "text": "Can I search arrays?",
          "next": "searchArray"
        }
      ]
    },
    "removeItems": {
      "id": "removeItems",
      "speaker": "Pixel",
      "text": "Removing items is like using consumables - they disappear from your inventory!",
      "codeExample": "let inventory = ['sword', 'potion', 'shield', 'map'];\n\n// Remove the last item and get it back\nlet last = inventory.pop(); // last is 'map'\n\n// Remove the first item\nlet first = inventory.shift(); // first is 'sword'\n\n// Remove by index (index 1, remove 1 item)\ninventory.splice(1, 1);\n\nconsole.log(inventory); // ['potion']",
      "followUp": "pop() removes the end, shift() removes the start, and splice() can remove from anywhere!",
      "options": [
        {
          "text": "What about searching?",
          "next": "searchArray"
        }
      ]
    },
    "searchArray": {
      "id": "searchArray",
      "speaker": "Pixel",
      "text": "Searching arrays is crucial for game logic - like checking if the player has a key!",
      "codeExample": "let inventory = ['sword', 'shield', 'potion', 'map'];\n\n// Check if item exists\nif (inventory.includes('key')) {\n    console.log('You can unlock the door!');\n} else {\n    console.log('You need a key!');\n}\n\n// Find the position of an item\nlet mapPosition = inventory.indexOf('map'); // 3\nif (mapPosition !== -1) {\n    console.log('Map is in slot ' + mapPosition);\n}",
      "followUp": "includes() tells you if it's there, and indexOf() tells you exactly where!",
      "options": [
        {
          "text": "Can I sort arrays?",
          "next": "sortArray"
        },
        {
          "text": "Show me slicing!",
          "next": "slicing"
        }
      ]
    },
    "sortArray": {
      "id": "sortArray",
      "speaker": "Pixel",
      "text": "Sorting is perfect for leaderboards and organizing inventory!",
      "codeExample": "// High scores\nlet scores = [500, 1200, 300, 950, 750];\nscores.sort((a, b) => a - b); // Sorts smallest to largest\nconsole.log(scores); // [300, 500, 750, 950, 1200]\n\n// Reverse sort (largest first)\nscores.sort((a, b) => b - a);\nconsole.log(scores); // [1200, 950, 750, 500, 300]",
      "followUp": "sort() changes the array itself. For numbers, we give it a little helper function to get the order right!",
      "options": [
        {
          "text": "What's array slicing?",
          "next": "slicing"
        }
      ]
    },
    "slicing": {
      "id": "slicing",
      "speaker": "Pixel",
      "text": "Slicing lets you grab chunks of an array - like selecting a subset of items!",
      "codeExample": "let items = ['sword', 'shield', 'bow', 'arrow', 'potion', 'map'];\n\n// Get first 3 items (from index 0 to 3, but not including 3)\nlet firstThree = items.slice(0, 3); // ['sword', 'shield', 'bow']\n\n// Get everything from index 4 onwards\nlet lastTwo = items.slice(4);\n\n// Copy the entire array\nlet copy = items.slice();",
      "followUp": "slice(start, end) is perfect for creating sub-inventories or copies of data!",
      "options": [
        {
          "text": "Can arrays contain arrays?",
          "next": "nestedArrays"
        },
        {
          "text": "Show me array tricks!",
          "next": "arrayTricks"
        }
      ]
    },
    "nestedArrays": {
      "id": "nestedArrays",
      "speaker": "Pixel",
      "text": "Arrays can contain other arrays - perfect for game grids and 2D maps!",
      "codeExample": "// Game board (tic-tac-toe)\nlet board = [\n    ['X', 'O', 'X'],\n    ['O', 'X', 'O'],\n    ['O', 'X', 'X']\n];\n\n// Access specific cell [row][column]\nlet middle = board[1][1]; // 'X'\n\n// Inventory with categories\nlet categories = [\n    ['sword', 'bow'],     // Weapons\n    ['potion', 'herb']    // Consumables\n];\nlet firstWeapon = categories[0][0]; // 'sword'",
      "followUp": "Nested arrays are how we build 2D worlds in Strata!",
      "options": [
        {
          "text": "Show me cool array tricks!",
          "next": "arrayTricks"
        }
      ]
    },
    "arrayTricks": {
      "id": "arrayTricks",
      "speaker": "Pixel",
      "text": "Here are some pro techniques for game development in TypeScript!",
      "codeExample": "// Create an array of 5 identical enemies\nlet enemies = Array(5).fill('goblin');\n\n// Filter: Keep only the potions\nlet items = ['sword', 'potion', 'key', 'potion'];\nlet potions = items.filter(item => item === 'potion');\n\n// Map: Double all damage values\nlet damages = [10, 20, 15];\nlet doubled = damages.map(d => d * 2); // [20, 40, 30]",
      "followUp": "filter() and map() are super powerful tools for handling game data!",
      "options": [
        {
          "text": "Time to practice!",
          "next": "practiceChallenge"
        }
      ]
    },
    "practiceChallenge": {
      "id": "practiceChallenge",
      "speaker": "Pixel",
      "text": "Boss Challenge! Create an inventory management system!",
      "followUp": "Track items, add loot, use potions, and check if you're full!",
      "codeExample": "let inventory = ['sword', 'potion'];\nlet maxSize = 5;\n\nfunction addItem(item) {\n    if (inventory.length < maxSize) {\n        inventory.push(item);\n        console.log('Added ' + item);\n    } else {\n        console.log('Inventory full!');\n    }\n}\n\nfunction useItem(item) {\n    let index = inventory.indexOf(item);\n    if (index !== -1) {\n        inventory.splice(index, 1);\n        console.log('Used ' + item);\n    } else {\n        console.log('No ' + item + ' found!');\n    }\n}\n\naddItem('shield');\nuseItem('potion');\nconsole.log('Current inventory:', inventory);",
      "options": [
        {
          "text": "Arrays are powerful!",
          "next": "lessonComplete"
        }
      ]
    },
    "lessonComplete": {
      "id": "lessonComplete",
      "speaker": "Pixel",
      "text": "ðŸŽŠ LEVEL 5 COMPLETE! You're now an Array Master! ðŸ“œ",
      "followUp": "Arrays are everywhere in games - inventories, enemies, tiles, scores... You've got the power now!",
      "action": "completeLesson",
      "actionParams": { "lesson": 5, "nextLesson": 6 },
      "options": [
        {
          "text": "Continue to Lesson 6 - Functions!",
          "action": "loadLesson",
          "actionParams": { "lesson": 6 }
        },
        {
          "text": "I'm ready to make games!",
          "action": "startGameMode"
        },
        {
          "text": "Back to lesson menu",
          "action": "openLessons"
        }
      ]
    }
  },
  "startNode": "start"
}
